<ng-template #content let-modal>
  <form #addPatientForm="ngForm">
  <div class="modal-header">

    <h4 class="modal-title">Adding a new patient<span class="badge badge-secondary ml-2">New</span></h4>

    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">

    <div class="form-group">
      <label for="lastNameForm">Surname</label>
      <input  #lastName="ngModel"
              type="text"
              class="form-control"
              id="lastNameForm"
              name="lastNameForm"
              aria-describedby="lastNameHelp"
              [(ngModel)]="formsData.lastName"
              autocomplete="off"
              required
              pattern="[a-zA-Z-]+"
              [class.is-invalid]="lastName.invalid && lastName.touched"
              [class.is-valid]="lastName.valid && lastName.touched">
      <small id="lastNameHelp" class="form-text text-muted">Only the real surname.</small>
    </div>
    <div class="form-group">
      <label for="nameForm">Name</label>
      <input  #firstName="ngModel"
              type="text"
              class="form-control is-invalid"
              id="nameForm"
              name="nameForm"
              [(ngModel)]="formsData.firstName"
              autocomplete="off"
              required
              pattern="[a-zA-Z-]+"
              [class.is-invalid]="firstName.invalid && firstName.touched"
              [class.is-valid]="firstName.valid && firstName.touched">
    </div>
    <div class="form-group">
      <label for="birthDateForm">Birth date</label>
      <div class="input-group font-weight-normal">
        <input  #dateForm="ngModel"
                class="form-control"
                placeholder="DD.MM.YYYY"
                id="birthDateForm"
                [minDate]="{ year: date.getFullYear()-100, month: 1, day: 1 }"
                [maxDate]="{ year: date.getFullYear(), month: 12, day: 31 }"
                autocomplete="off"
                name="dp"
                [(ngModel)]="formsData.birthDate"
                ngbDatepicker
                #d="ngbDatepicker"
                required
                pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}"
                [class.is-invalid]="dateForm.invalid && dateForm.dirty"
                [class.is-valid]="dateForm.valid && dateForm.dirty">
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button"><i class="fa fa-calendar" aria-hidden="true"></i></button>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="sexForm">Gender</label>
      <select #sex="ngModel"
              class="custom-select"
              id="sexForm"
              name="sexForm"
              [(ngModel)]="formsData.sex"
              required
              [class.is-invalid]="sex.invalid && sex.touched"
              [class.is-valid]="sex.valid && sex.touched">
        <option [ngValue]="1">Male</option>
        <option [ngValue]="2">Female</option>
      </select>
    </div>
    <div class="form-group">
      <label for="phoneForm">Phone</label>
      <input  #phone="ngModel"
              [textMask]="{mask: phoneMask}"
              placeholder="(___) ___-__-__"
              type="text"
              class="form-control"
              id="phoneForm"
              name="phoneForm"
              aria-describedby="phoneHelp"
              autocomplete="off"
              [(ngModel)]="formsData.phone"
              required
              pattern="[0-9() -]+"
              [class.is-invalid]="phone.invalid && phone.touched"
              [class.is-valid]="phone.valid && phone.touched">
      <small id="phoneHelp" class="form-text text-muted">Patient's phone number.</small>
    </div>

  </div>

  <div class="modal-footer">
    <button [disabled]="sendLoading || addPatientForm.invalid" type="button" class="btn btn-theme-primary" (click)="sendData()">
      <span *ngIf="sendLoading">Creating...</span>
      <span *ngIf="!sendLoading">Create</span>
    </button>
    <button type="button" ngbAutofocus class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
  </div>
</form>
</ng-template>